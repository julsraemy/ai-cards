<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information Science and information specialists working with AI, designing with AI and developing for AI - Interactive Venn Diagram Exercise</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 1rem;
            touch-action: manipulation;
            overscroll-behavior: contain;
        }

        @media (max-width: 768px) {
            body {
                padding: 0.5rem;
            }
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 0.5rem;
        }

        .header h1 {
            font-size: 1.1rem;
            margin-bottom: 0.3rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            font-weight: 700;
            line-height: 1.2;
        }
        
        /* Larger font on bigger screens */
        @media (min-width: 768px) {
            .header h1 {
                font-size: 1.3rem;
            }
        }
        
        @media (min-width: 1200px) {
            .header h1 {
                font-size: 1.5rem;
                margin-bottom: 0.5rem;
            }
        }

        .main-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 0.5rem; /* Reduced gap */
            max-width: 1400px;
            margin: 0 auto;
        }

        .cards-panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1rem;
            height: fit-content;
        }

        .cards-title {
            color: white;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-align: center;
        }
        
        @media (min-width: 1200px) {
            .cards-title {
                font-size: 1.1rem;
            }
        }

        .card-item {
            background: white;
            border-radius: 8px;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            position: relative;
            user-select: none;
            border: 3px solid transparent;
        }

        .card-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .card-item:active {
            transform: scale(0.98);
        }

        .card-item.selected {
            border-color: #355cc9;
            background: #f0f7ff;
        }

        .card-item.placed {
            opacity: 0.5;
            background: #f5f5f5;
        }

        .card-number {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: #355cc9;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .card-title {
            font-size: 0.8rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.3rem;
            padding-right: 2rem;
        }
        
        @media (min-width: 1200px) {
            .card-title {
                font-size: 1rem;
            }
        }

        .card-pov {
            font-size: 0.6rem;
            color: #666;
            font-style: italic;
        }
        
        @media (min-width: 1200px) {
            .card-pov {
                font-size: 0.8rem;
            }
        }

        .click-hint {
            font-size: 0.6rem;
            color: #999;
            text-align: center;
            margin-top: 0.3rem;
        }

        .assign-btn {
            background: #355cc9 !important;
            color: white !important;
            border: 2px solid #2a4aa3 !important;
            padding: 0.6rem 0.8rem !important;
            border-radius: 15px !important;
            font-size: 0.7rem !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            margin-top: 0.5rem !important;
            transition: all 0.3s ease !important;
            width: 100% !important;
            text-align: center !important;
            display: block !important;
        }
        
        @media (min-width: 1200px) {
            .assign-btn {
                font-size: 0.8rem !important;
                padding: 0.7rem 1rem !important;
            }
        }

        .assign-btn:hover {
            background: #2a4aa3 !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 12px rgba(53, 92, 201, 0.3) !important;
        }

        .venn-container {
            position: relative;
            height: 650px; /* Increased base height */
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            overflow: hidden;
            padding: 5px; /* Reduced padding */
        }

        .venn-svg {
            width: 100%;
            height: 100%;
        }

        .zone-circle {
            fill-opacity: 0.2;
            stroke-width: 4;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .zone-circle:hover {
            fill-opacity: 0.4;
            stroke-width: 6;
        }

        .working-zone { fill: #ff4444; stroke: #cc0000; }
        .designing-zone { fill: #4444ff; stroke: #0000cc; }
        .developing-zone { fill: #ffff44; stroke: #cccc00; }

        .zone-label {
            font-size: 16px;
            font-weight: 700;
            fill: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            text-anchor: middle;
            pointer-events: none;
        }
        
        @media (min-width: 1200px) {
            .zone-label {
                font-size: 20px;
                text-shadow: 2px 2px 6px rgba(0,0,0,0.8);
            }
        }

        .placed-card {
            position: absolute !important;
            background: #6b7280 !important;
            border-radius: 8px !important;
            padding: 0.5rem !important;
            font-size: 0.7rem !important;
            font-weight: 700 !important;
            text-align: center !important;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4) !important;
            cursor: pointer !important;
            min-width: 70px !important;
            max-width: 120px !important;
            z-index: 1000 !important;
            border: 2px solid #4b5563 !important;
            color: white !important;
            animation: gentle-pulse 3s infinite !important;
        }

        .placed-card:hover {
            transform: scale(1.1) !important;
            z-index: 2000 !important;
            background: #4b5563 !important;
        }

        @keyframes gentle-pulse {
            0% { opacity: 0.9; }
            50% { opacity: 1; }
            100% { opacity: 0.9; }
        }

        /* Mobile-specific sizing for placed cards */
        @media (max-width: 768px) {
            .placed-card {
                font-size: 0.5rem !important;
                padding: 0.3rem !important;
                min-width: 50px !important;
                max-width: 80px !important;
                border: 2px solid #4b5563 !important;
                border-radius: 6px !important;
            }
        }

        @media (max-width: 480px) {
            .placed-card {
                font-size: 0.4rem !important;
                padding: 0.2rem !important;
                min-width: 40px !important;
                max-width: 60px !important;
                border: 1px solid #4b5563 !important;
                border-radius: 4px !important;
            }
        }

        /* SUPER SIMPLE MODAL - GUARANTEED VISIBLE */
        .simple-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.9);
            z-index: 999999;
        }

        .simple-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 0 50px rgba(255,255,255,0.5);
            border: 5px solid #355cc9;
        }

        .modal-title {
            color: #355cc9;
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        @media (min-width: 1200px) {
            .modal-title {
                font-size: 1.2rem;
            }
        }

        .modal-instruction {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
            font-style: italic;
            background: #f8f9ff;
            padding: 1rem;
            border-radius: 8px;
        }

        .question-box {
            display: flex;
            align-items: center;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 3px solid #ddd;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .question-box:hover {
            border-color: #355cc9;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(53, 92, 201, 0.2);
        }

        .question-box.selected {
            border-color: #355cc9;
            background: #f0f7ff;
            box-shadow: 0 4px 12px rgba(53, 92, 201, 0.3);
        }

        .checkbox {
            width: 30px;
            height: 30px;
            border: 3px solid #355cc9;
            border-radius: 8px;
            margin-right: 1rem;
            position: relative;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .checkbox.checked {
            background: #355cc9;
            transform: scale(1.1);
        }

        .checkbox.checked::after {
            content: '✓';
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            font-size: 20px;
        }

        .question-text {
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }
        
        @media (min-width: 1200px) {
            .question-text {
                font-size: 1.2rem;
            }
        }

        .modal-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            gap: 1rem;
        }

        .btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.7rem;
        }
        
        @media (min-width: 1200px) {
            .btn {
                font-size: 0.9rem;
                padding: 0.6rem 1.2rem;
            }
        }

        .btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .btn-cancel {
            background: #6c757d;
            color: white;
            border: 1px solid #6c757d;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        .btn-place {
            background: #22c55e !important;
            color: white !important;
            border: 3px solid #16a34a !important;
            font-size: 1.1rem !important;
            font-weight: 700 !important;
            padding: 1rem 2rem !important;
            border-radius: 15px !important;
            cursor: pointer !important;
            animation: pulse-green 2s infinite !important;
            min-width: 150px !important;
        }

        .btn-place:hover {
            background: #16a34a !important;
            transform: scale(1.05) !important;
        }

        @keyframes pulse-green {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            50% { transform: scale(1.02); box-shadow: 0 0 20px 10px rgba(34, 197, 94, 0.3); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
        }

        .close-x {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
        }

        .close-x:hover {
            color: #333;
        }

        /* Details Modal */
        .details-modal {
            display: none;
            position: fixed;
            z-index: 999998;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .details-modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .details-modal-title {
            color: #355cc9;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        @media (min-width: 1200px) {
            .details-modal-title {
                font-size: 1.8rem;
            }
        }

        .details-modal-pov {
            background: linear-gradient(135deg, #355cc9, #4a90e2);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        
        @media (min-width: 1200px) {
            .details-modal-pov {
                font-size: 1rem;
                padding: 0.5rem 1rem;
            }
        }

        .details-modal-description {
            color: #333;
            line-height: 1.6;
            margin: 1.5rem 0;
            font-size: 1rem;
        }
        
        @media (min-width: 1200px) {
            .details-modal-description {
                font-size: 1.1rem;
                line-height: 1.7;
            }
        }

        .details-modal-links {
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .details-modal-link {
            background: #355cc9;
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        @media (min-width: 1200px) {
            .details-modal-link {
                font-size: 1rem;
                padding: 0.7rem 1.4rem;
            }
        }

        .details-modal-link:hover {
            background: #2a4aa3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(53, 92, 201, 0.3);
        }

        .controls {
            text-align: center;
            margin: 1rem 0;
        }

        .legend {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            color: white;
        }

        .legend h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1rem;
            text-align: center;
        }
        
        @media (min-width: 1200px) {
            .legend h3 {
                font-size: 1.2rem;
            }
        }

        .legend-section {
            margin-bottom: 0.8rem;
            font-size: 0.8rem;
        }
        
        @media (min-width: 1200px) {
            .legend-section {
                font-size: 0.9rem;
                margin-bottom: 1rem;
            }
        }

        .legend-title {
            font-weight: 700;
            margin-bottom: 0.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .colour-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        @media (min-width: 1200px) {
            .colour-indicator {
                width: 15px;
                height: 15px;
            }
        }

        .red { background-color: #ff4444; }
        .blue { background-color: #4444ff; }
        .yellow { background-color: #ffff44; }
        .purple { background-color: #aa44aa; }
        .orange { background-color: #ff9944; }
        .brown { background-color: #996633; }

        .legend-items {
            font-size: 0.7rem;
            line-height: 1.3;
            padding-left: 0.5rem;
        }
        
        @media (min-width: 1200px) {
            .legend-items {
                font-size: 0.8rem;
                line-height: 1.4;
                padding-left: 0.8rem;
            }
        }

        /* Solution diagram styles */
        .solution-diagram {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            position: relative;
            height: 400px; /* Increased from 300px */
        }

        .solution-svg {
            width: 100%;
            height: 100%;
        }

        .solution-dot {
            fill: #036409;
            stroke: #4b5563;
            stroke-width: 2;
        }

        .solution-text {
            fill: white;
            font-size: 10px;
            font-weight: 700;
            text-anchor: middle;
            pointer-events: none;
        }
        
        @media (min-width: 1200px) {
            .solution-text {
                font-size: 12px;
            }
        }

        .status-message {
            background: rgba(0,255,0,0.3);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .status-error {
            background: rgba(255,0,0,0.3);
        }

        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 0.5rem; /* Reduced gap */
            }
            
            .cards-panel {
                order: 2;
                max-height: 30vh; /* Increased from 25vh */
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .venn-container {
                height: 75vh; /* Increased from 70vh */
                margin-bottom: 0.5rem; /* Reduced from 1rem */
            }
            
            .header h1 {
                font-size: 1.3rem;
            }

            .zone-label {
                font-size: 18px;
                font-weight: 800;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
            }
            
            .placed-card {
                font-size: 0.7rem;
                padding: 0.6rem;
                min-width: 90px;
            }
        }

        @media (max-width: 768px) {
            .venn-container {
                height: 80vh; /* Increased from 65vh */
                padding: 5px; /* Reduced padding */
            }
            
            .cards-panel {
                max-height: 30vh; /* Increased from 20vh */
                padding: 0.8rem; /* Reduced padding */
            }
            
            .zone-label {
                font-size: 16px;
                font-weight: 800;
            }
            
            .placed-card {
                font-size: 0.7rem;
                padding: 0.5rem;
                min-width: 80px;
            }

            .simple-modal-content {
                margin: 5% auto;
                padding: 1.5rem;
            }
            
            /* Make solution diagram bigger on small screens */
            .solution-diagram {
                height: 350px;
                padding: 0.5rem;
            }
        }

        /* Region dots that show all cards in that region */
        .region-dot {
            position: absolute;
            min-width: 30px;
            min-height: 30px;
            background: #6b7280;
            border: 3px solid #4b5563;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            color: white;
            cursor: pointer;
            z-index: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            padding: 3px;
        }

        .region-dot:hover {
            transform: scale(1.1);
            background: #4b5563;
            box-shadow: 0 4px 15px rgba(75, 85, 99, 0.4);
        }

        .region-dot.empty {
            display: none;
        }

        /* Scale circle based on number of cards */
        .region-dot.size-1 { min-width: 30px; min-height: 30px; font-size: 12px; }
        .region-dot.size-2 { min-width: 40px; min-height: 40px; font-size: 11px; }
        .region-dot.size-3 { min-width: 50px; min-height: 50px; font-size: 10px; }
        .region-dot.size-4 { min-width: 60px; min-height: 60px; font-size: 9px; }
        .region-dot.size-5 { min-width: 70px; min-height: 70px; font-size: 8px; }
        
        /* Larger dots on bigger screens */
        @media (min-width: 1200px) {
            .region-dot.size-1 { min-width: 35px; min-height: 35px; font-size: 13px; }
            .region-dot.size-2 { min-width: 45px; min-height: 45px; font-size: 12px; }
            .region-dot.size-3 { min-width: 55px; min-height: 55px; font-size: 11px; }
            .region-dot.size-4 { min-width: 65px; min-height: 65px; font-size: 10px; }
            .region-dot.size-5 { min-width: 75px; min-height: 75px; font-size: 9px; }
        }

        @media (max-width: 768px) {
            .region-dot.size-1 { min-width: 25px; min-height: 25px; font-size: 10px; }
            .region-dot.size-2 { min-width: 35px; min-height: 35px; font-size: 9px; }
            .region-dot.size-3 { min-width: 45px; min-height: 45px; font-size: 8px; }
            .region-dot.size-4 { min-width: 55px; min-height: 55px; font-size: 7px; }
            .region-dot.size-5 { min-width: 65px; min-height: 65px; font-size: 6px; }
        }

        @media (max-width: 480px) {
            .region-dot.size-1 { min-width: 22px; min-height: 22px; font-size: 9px; }
            .region-dot.size-2 { min-width: 30px; min-height: 30px; font-size: 8px; }
            .region-dot.size-3 { min-width: 38px; min-height: 38px; font-size: 7px; }
            .region-dot.size-4 { min-width: 46px; min-height: 46px; font-size: 6px; }
            .region-dot.size-5 { min-width: 54px; min-height: 54px; font-size: 5px; }
        }

        @media (min-width: 1400px) {
            .venn-container {
                height: 700px; /* Increased from 650px */
            }
            
            .zone-label {
                font-size: 22px; /* Increased from 18px */
                font-weight: 700;
            }
            
            /* Make solution diagram even bigger on large screens */
            .solution-diagram {
                height: 450px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Information Science and information specialists working with AI, designing with AI and developing for AI</h1>
    </div>

    <div class="status-message" id="statusMessage"></div>

    <div class="main-container">
        <div class="cards-panel">
            <div class="cards-title">Available Cards</div>
            <div id="cards-container">
                <div class="card-item" data-card="1">
                    <div class="card-number">01</div>
                    <div class="card-title">Annif</div>
                    <div class="card-pov">Subject Cataloger</div>
                    <button class="assign-btn" onclick="openQuestionsModal(1)">Assign Region</button>
                </div>
                <div class="card-item" data-card="2">
                    <div class="card-number">02</div>
                    <div class="card-title">Citation and Best Practices Guidelines</div>
                    <div class="card-pov">University Librarian</div>
                    <button class="assign-btn" onclick="openQuestionsModal(2)">Assign Region</button>
                </div>
                <div class="card-item" data-card="3">
                    <div class="card-number">03</div>
                    <div class="card-title">RAG Chatbot</div>
                    <div class="card-pov">Data Scientist</div>
                    <button class="assign-btn" onclick="openQuestionsModal(3)">Assign Region</button>
                </div>
                <div class="card-item" data-card="4">
                    <div class="card-number">04</div>
                    <div class="card-title">MCP + IIIF Integration</div>
                    <div class="card-pov">Software Developer</div>
                    <button class="assign-btn" onclick="openQuestionsModal(4)">Assign Region</button>
                </div>
                <div class="card-item" data-card="5">
                    <div class="card-number">05</div>
                    <div class="card-title">Image Similarity Search</div>
                    <div class="card-pov">IT Archivist</div>
                    <button class="assign-btn" onclick="openQuestionsModal(5)">Assign Region</button>
                </div>
                <div class="card-item" data-card="6">
                    <div class="card-number">06</div>
                    <div class="card-title">E-Periodica Next Level Access</div>
                    <div class="card-pov">Metadata Librarian</div>
                    <button class="assign-btn" onclick="openQuestionsModal(6)">Assign Region</button>
                </div>
                <div class="card-item" data-card="7">
                    <div class="card-number">07</div>
                    <div class="card-title">VSA-AAS White Paper on ML</div>
                    <div class="card-pov">Archive Director</div>
                    <button class="assign-btn" onclick="openQuestionsModal(7)">Assign Region</button>
                </div>
                <div class="card-item" data-card="8">
                    <div class="card-number">08</div>
                    <div class="card-title">AI Bots vs Open Data</div>
                    <div class="card-pov">Data Steward</div>
                    <button class="assign-btn" onclick="openQuestionsModal(8)">Assign Region</button>
                </div>
                <div class="card-item" data-card="9">
                    <div class="card-number">09</div>
                    <div class="card-title">Open Library Data Dumps</div>
                    <div class="card-pov">Data Curator</div>
                    <button class="assign-btn" onclick="openQuestionsModal(9)">Assign Region</button>
                </div>
                <div class="card-item" data-card="10">
                    <div class="card-number">10</div>
                    <div class="card-title">HTR with Transkribus</div>
                    <div class="card-pov">Medieval Manuscripts Archivist</div>
                    <button class="assign-btn" onclick="openQuestionsModal(10)">Assign Region</button>
                </div>
                <div class="card-item" data-card="11">
                    <div class="card-number">11</div>
                    <div class="card-title">IIIF Tsukushi Viewer</div>
                    <div class="card-pov">Systems Librarian</div>
                    <button class="assign-btn" onclick="openQuestionsModal(11)">Assign Region</button>
                </div>
                <div class="card-item" data-card="12">
                    <div class="card-number">12</div>
                    <div class="card-title">eluxemburgensia Chatbot</div>
                    <div class="card-pov">Historian</div>
                    <button class="assign-btn" onclick="openQuestionsModal(12)">Assign Region</button>
                </div>
            </div>
        </div>

        <div class="venn-container" id="venn-container">
            <svg class="venn-svg" viewBox="0 0 900 650">
                <!-- Working with AI Circle -->
                <circle cx="290" cy="200" r="180" class="zone-circle working-zone" data-zone="working"/>
                
                <!-- Designing with AI Circle -->
                <circle cx="610" cy="200" r="180" class="zone-circle designing-zone" data-zone="designing"/>
                
                <!-- Developing for AI Circle -->
                <circle cx="450" cy="410" r="180" class="zone-circle developing-zone" data-zone="developing"/>

                <!-- Zone Labels -->
                <text x="180" y="120" class="zone-label">Working with AI</text>
                <text x="720" y="120" class="zone-label">Designing with AI</text>
                <text x="450" y="600" class="zone-label">Developing for AI</text>
            </svg>
        </div>
    </div>

    <!-- SUPER SIMPLE THREE-QUESTION MODAL -->
    <div id="questionsModal" class="simple-modal">
        <div class="simple-modal-content">
            <div class="close-x" onclick="closeQuestionsModal()">&times;</div>
            <h2 class="modal-title" id="questionsTitle">Answer the Three Questions</h2>
            <div class="modal-instruction">
                Check the boxes for "Yes" answers. Leave unchecked for "No" answers.
            </div>
            
            <div class="question-box" onclick="toggleQuestion('working')">
                <div class="checkbox" id="checkbox-working"></div>
                <div class="question-text">Working with AI?</div>
            </div>
            
            <div class="question-box" onclick="toggleQuestion('designing')">
                <div class="checkbox" id="checkbox-designing"></div>
                <div class="question-text">Designing with AI?</div>
            </div>
            
            <div class="question-box" onclick="toggleQuestion('developing')">
                <div class="checkbox" id="checkbox-developing"></div>
                <div class="question-text">Developing for AI?</div>
            </div>
            
            <div class="modal-buttons">
                <button class="btn btn-cancel" onclick="closeQuestionsModal()">Cancel</button>
                <button class="btn btn-place" onclick="placeCard()">✅ PLACE CARD</button>
            </div>
        </div>
    </div>

    <!-- Details Modal -->
    <div id="detailsModal" class="details-modal">
        <div class="details-modal-content">
            <span class="close-x" onclick="closeDetailsModal()">&times;</span>
            <div>
                <h2 class="details-modal-title" id="detailsTitle"></h2>
                <div class="details-modal-pov" id="detailsPOV"></div>
            </div>
            <div class="details-modal-description" id="detailsDescription"></div>
            <div class="details-modal-links" id="detailsLinks"></div>
        </div>
    </div>

    <div class="controls">
        <button class="btn" onclick="resetCards()">Reset All Cards</button>
        <button class="btn" onclick="showSolution()">Show Proposed Solution</button>
        <button class="btn" onclick="hideSolution()">Hide Solution</button>
    </div>

    <div class="legend" id="solution-legend" style="display: none;">
        <h3>Proposed Solution - Card Distribution by Category</h3>
        
        <div class="legend-section">
            <div class="legend-title">
                <span class="colour-indicator red"></span>
                Only Working with AI (3 cards):
            </div>
            <div class="legend-items">
                01 - Annif (using existing AI tool for cataloguing)<br>
                10 - HTR with Transkribus (using existing AI service)<br>
                12 - eluxemburgensia Chatbot (historian using AI tool for research)
            </div>
        </div>

        <div class="legend-section">
            <div class="legend-title">
                <span class="colour-indicator blue"></span>
                Only Designing with AI (2 cards):
            </div>
            <div class="legend-items">
                07 - VSA-AAS White Paper on ML (policy framework development)<br>
                08 - AI Bots vs Open Data Risks (risk assessment and governance)
            </div>
        </div>

        <div class="legend-section">
            <div class="legend-title">
                <span class="colour-indicator yellow"></span>
                Only Developing for AI (3 cards):
            </div>
            <div class="legend-items">
                04 - MCP + IIIF Integration (API development for AI systems)<br>
                06 - E-Periodica Next Level Access (building AI infrastructure for metadata)<br>
                09 - Open Library Data Dumps (training data for AI models)
            </div>
        </div>

        <div class="legend-section">
            <div class="legend-title">
                <span class="colour-indicator purple"></span>
                Working + Designing (2 cards):
            </div>
            <div class="legend-items">
                02 - Citation and Best Practices Guidelines (policy creation + implementation)<br>
                11 - IIIF Tsukushi Viewer (system implementation + user interface design)
            </div>
        </div>

        <div class="legend-section">
            <div class="legend-title">
                <span class="colour-indicator orange"></span>
                Working + Developing (1 card):
            </div>
            <div class="legend-items">
                05 - Image Similarity Search (system setup + daily use)
            </div>
        </div>

        <div class="legend-section">
            <div class="legend-title">
                <span class="colour-indicator brown"></span>
                All Three Categories (1 card):
            </div>
            <div class="legend-items">
                03 - RAG Chatbot (building system + policy framework + daily use)
            </div>
        </div>

        <!-- Solution Diagram -->
        <div class="solution-diagram">
            <h4>Proposed Solution - Venn Diagram</h4>
            <svg class="solution-svg" viewBox="0 0 450 325">
                <!-- Working with AI Circle -->
                <circle cx="145" cy="100" r="90" class="zone-circle working-zone" opacity="0.3"/>
                
                <!-- Designing with AI Circle -->
                <circle cx="305" cy="100" r="90" class="zone-circle designing-zone" opacity="0.3"/>
                
                <!-- Developing for AI Circle -->
                <circle cx="225" cy="205" r="90" class="zone-circle developing-zone" opacity="0.3"/>

                <!-- Zone Labels -->
                <text x="90" y="60" class="zone-label" font-size="12">Working with AI</text>
                <text x="360" y="60" class="zone-label" font-size="12">Designing with AI</text>
                <text x="225" y="315" class="zone-label" font-size="12">Developing for AI</text>

                <!-- Solution dots with card numbers -->
                <!-- Only Working with AI -->
                <circle cx="125" cy="75" r="15" class="solution-dot"/>
                <text x="125" y="80" class="solution-text">01; 10; 12</text>
                
                <!-- Only Designing with AI -->
                <circle cx="325" cy="75" r="15" class="solution-dot"/>
                <text x="325" y="80" class="solution-text">07; 08</text>
                
                <!-- Only Developing for AI -->
                <circle cx="225" cy="240" r="15" class="solution-dot"/>
                <text x="225" y="245" class="solution-text">04; 06; 09</text>
                
                <!-- Working + Designing -->
                <circle cx="225" cy="75" r="15" class="solution-dot"/>
                <text x="225" y="80" class="solution-text">02; 11</text>
                
                <!-- Working + Developing -->
                <circle cx="185" cy="152" r="15" class="solution-dot"/>
                <text x="185" y="157" class="solution-text">05</text>
                
                <!-- All Three Categories -->
                <circle cx="225" cy="135" r="15" class="solution-dot"/>
                <text x="225" y="140" class="solution-text">03</text>
            </svg>
        </div>
    </div>

    <script>
        // SIMPLE GLOBALS
        let currentCardId = null;
        let selectedAnswers = [];
        let placedCards = new Map();
        let clickTimer = null;

        // Card data
        const cardTitles = {
            1: "Annif", 2: "Citation Guidelines", 3: "RAG Chatbot", 4: "MCP + IIIF",
            5: "Image Similarity", 6: "E-Periodica NLA", 7: "VSA-AAS Paper", 8: "AI Bots vs Open Data",
            9: "Open Library", 10: "HTR Transkribus", 11: "Tsukushi Viewer", 12: "eluxemburgensia"
        };

        // FIXED POSITIONING - Match actual SVG circles
        const regionPositions = {
            'working': { x: 290, y: 200 },                    // Only Working (matches SVG cx="290" cy="200")
            'designing': { x: 610, y: 200 },                 // Only Designing (matches SVG cx="610" cy="200")
            'developing': { x: 450, y: 410 },                // Only Developing (matches SVG cx="450" cy="410")
            'working,designing': { x: 450, y: 150 },         // Working + Designing (intersection)
            'working,developing': { x: 370, y: 305 },        // Working + Developing (intersection)
            'designing,developing': { x: 530, y: 305 },      // Designing + Developing (intersection)
            'working,designing,developing': { x: 450, y: 270 } // All Three (center)
        };

        // Card detailed information
        const cardDetails = {
            1: {
                title: "Annif",
                pov: "POV: Subject Cataloger",
                description: `<p>Annif is an automated tool for indexing subjects that uses machine learning to suggest appropriate subject headings and classifications for library materials. Rather than librarians having to read through every document manually, Annif can analyse texts and suggest relevant classifications.</p>
                <p>This speeds up the cataloguing process significantly whilst maintaining quality, as human catalogers still review and validate the AI's suggestions before they're finalised.</p>`,
                links: [
                    { text: "🔗 Official Site", url: "https://annif.org/" },
                    { text: "💻 GitHub", url: "https://github.com/NatLibFi/Annif" }
                ]
            },
            2: {
                title: "Citation and Best Practices Guidelines",
                pov: "POV: University Librarian",
                description: `<p>University libraries like the University of Geneva are creating practical guides to help students properly reference and cite generative AI tools such as ChatGPT, Claude, or Gemini in their academic work. These guidelines are essential for maintaining academic integrity whilst embracing new technologies.</p>
                <p>These guide cover citation formats for different AI tools, requirements for disclosing AI use in assignments, and how to fact-check AI-generated content whilst properly attributing AI assistance in academic work.</p>`,
                links: [
                    { text: "🏛️ Referencing the use of GenAI (University of Geneva)", url: "https://www.unige.ch/biblio/en/news/archive/2024/guide-iag/" },
                    { text: "🏛️ Guide de l'Infothèque de la Haute école de travail social", url: "https://www.hesge.ch/hets/sites/hets/files/2024-11/Guide_referencement_IA_HETS-Geneve_2024.pdf" },
                    { text: "🏛️ Artificial Intelligence for Research and Scholarship (Harvard Library)", url: "https://guides.library.harvard.edu/airesearch" }
                ]
            },
            3: {
                title: "RAG Chatbot for LINDAS (Swiss Federal Archives)",
                pov: "POV: Data Scientist",
                description: `<p>Retrieval-Augmented Generation (RAG) is a system that combines an institution's specific knowledge with large language models to provide accurate, contextualised responses regarding its collections and history. The Swiss Federal Archives has developed a RAG Chatbot with the Fachhochschule Graubünden to help researchers navigate the Linked Data Services (LINDAS) system, where knowledge graphs of the Federal Administration can be stored and queried.</p>
                <p>This allows end users to ask natural language questions and receive accurate, source-backed answers.</p>`,
                links: [
                    { text: "💻 GitHub Repository", url: "https://github.com/SwissFederalArchives/sfa-chat-graph" },
                    { text: "🔗 Chatbot UI Prototype", url: "https://sfa-chat-graph.aeol.in/" },
                    { text: "🔗 LINDAS", url: "https://lindas.admin.ch/" }
                ]
            },
            4: {
                title: "MCP + IIIF AI Integration",
                pov: "POV: Software Developer in Cultural Heritage Institution",
                description: `<p>This involves developing Model Context Protocol (MCP) servers that enable AI systems to access and analyse International Image Interoperability Framework (IIIF)-served cultural heritage images. IIIF is a standard way that libraries and museums deliver high-quality images online, whilst MCP provides a standardised way for AI tools to access external data sources.</p>
                <p>The implementation includes parsing IIIF manifests, developing MCP servers for AI communication, integrating AI models for visual analysis, and creating metadata enrichment workflows. Projects like Yale's mcp-iiif-images demonstrate this integration.</p>`,
                links: [
                    { text: "💻 Yale MCP-IIIF", url: "https://github.com/mikeapp/mcp-iiif-images" },
                    { text: "🤗 National Archives of Sweden MCP-IIIF on Hugging Face", url: "https://huggingface.co/spaces/Riksarkivet/iiif_mcp_docs" }
                ]
            },
            5: {
                title: "Image Similarity in Archives",
                pov: "POV: IT Archivist",
                description: `<p>Archipanion is an AI-powered search system based on vitrivr technology that allows users to search for visually similar images in large photographic archives. The City of Bern Archives uses this system to help researchers explore their historical photograph collection using visual similarity rather than traditional text-based searching.</p>
                <p>Users can search either a scene with similar visual characteristics or text displayed in the media to find photographs. This helps to discover unexpected connections and identify duplicates, as well as enabling exploratory browsing that traditional keyword searching might miss.</p>`,
                links: [
                    { text: "📷 Archipanion for the Bern Archives", url: "https://stadtbern.archipanion.com/" },
                    { text: "📊 vitrivr (University of Basel)", url: "https://vitrivr.org/" }
                ]
            },
            6: {
                title: "E-Periodica Next Level Access",
                pov: "POV: Metadata Librarian",
                description: `<p>ETH Zurich Library's E-Periodica Next Level Access project demonstrates large-scale implementation of AI for cultural heritage. The project uses machine learning for named entity recognition and vector embeddings to semantically match and link millions of person references to authority files like the Gemeinsame Normdatei.</p>
                <p>While the scale is impressive (10 million digitised pages processed, 40 million person entity references extracted), the project emphasises local, resource-efficient solutions rather than relying on commercial AI services. This allows the library to build internal expertise and maintain control over their data processing workflows.</p>`,
                links: [
                    { text: "🔗 NLA Portal", url: "https://nla.e-periodica.ch/" },
                    { text: "📚 ETH Library", url: "https://www.library.ethz.ch/" }
                ]
            },
            7: {
                title: "VSA-AAS White Paper on ML",
                pov: "POV: Archive Director",
                description: `<p>The VSA-AAS (Association of Swiss Archivists) white paper on machine learning represents professional thinking about AI implementation in archives. The concept of "fluid metadata" that can evolve aligns with understanding information as dynamic rather than static, emphasising human-machine collaboration.</p>
                <p>Key concepts include "depth indexing" that goes beyond traditional cataloging, focusing on text recognition, linguistic processing, and multimedia retrieval. The emphasis is on machines excelling at information value while humans provide evidence value and context through "hybrid intelligence."</p>`,
                links: [
                    { text: "📚 VSA-AAS Resource", url: "https://vsa-aas.ch/ressourcen/zugang-und-vermittlung/maschinelles-lernen-im-archiv/" },
                    { text: "📄 White Paper PDF", url: "https://vsa-aas.ch/wp-content/uploads/2024/08/MachineLearning_im_Archiv_Whitepaper_2024-08-08_en.pdf" }
                ]
            },
            8: {
                title: "AI Bots vs Open Data Platforms",
                pov: "POV: Data Steward",
                description: `<p>There are growing concerns about the impact of AI systems on open data platforms and digital collections. While AI can make information more accessible through chatbot interfaces, it also introduces significant infrastructure and sustainability challenges alongside traditional concerns about information gatekeeping and reduced transparency.</p>
                <p>Key issues include the dramatic increase in automated bot traffic seeking training data, which has overwhelmed many cultural heritage institutions and open access platforms.</p>`,
                links: [
                    { text: "📊 glam-e lab report on AI bots", url: "https://www.glamelab.org/products/are-ai-bots-knocking-cultural-heritage-offline/" },
                    { text: "🌐 Wikimedia post on crawlers", url: "https://diff.wikimedia.org/2025/04/01/how-crawlers-impact-the-operations-of-the-wikimedia-projects/" }
                ]
            },
            9: {
                title: "Open Library Data Dumps",
                pov: "POV: Data Curator in Cultural Heritage",
                description: `<p>Open Library, part of the Internet Archive, provides comprehensive data dumps of their bibliographic database containing millions of book records, author information, and reading statistics. These datasets represent one of the largest openly available bibliographic collections for computational analysis and AI training.</p>
                <p>The data dumps include works, editions, authors, and subjects in structured formats suitable for machine learning applications. This enables researchers and developers to build AI systems for book recommendation, bibliographic analysis, and cultural heritage applications using real-world library data at scale.</p>`,
                links: [
                    { text: "📄 Data Dumps", url: "https://openlibrary.org/developers/dumps" },
                    { text: "📚 Internet Archive", url: "https://archive.org/" }
                ]
            },
            10: {
                title: "HTR Outputs from Transkribus",
                pov: "POV: Medieval Manuscripts Archivist",
                description: `<p>Handwritten Text Recognition (HTR) is an AI service that converts handwritten documents into searchable digital text. Transkribus is a popular platform providing this service, particularly valuable for historical documents and manuscripts in various languages and scripts.</p>
                <p>The process involves uploading scanned images of handwritten documents, where AI models analyse the handwriting and convert it to typed text. This transforms previously unsearchable historical documents into fully searchable digital archives.</p>`,
                links: [
                    { text: "📜 Transkribus", url: "https://www.transkribus.org/" }
                ]
            },
            11: {
                title: "IIIF Tsukushi Viewer",
                pov: "POV: Systems Librarian",
                description: `<p>The IIIF Tsukushi Viewer, developed by the Center for Open Data in the Humanities in Japan, leverages IIIF standards to connect multimodal AI models with classical Japanese texts. This innovative viewer allows users to interact with historical documents using modern language interfaces.</p>
                <p>Users can select specific pages or regions, ask questions in modern Japanese about classical content, and receive contextual responses that bridge the gap between historical documents and contemporary understanding. This demonstrates how AI can make cultural heritage more accessible while preserving scholarly rigor.</p>`,
                links: [
                    { text: "🔗 Project Page (Japanese)", url: "https://codh.rois.ac.jp/software/iiif-tsukushi-viewer/" },
                    { text: "🎥 Viewer", url: "https://codh.rois.ac.jp/tsukushi/iiif-tsukushi-viewer/" }
                ]
            },
            12: {
                title: "eluxemburgensia Chatbot",
                pov: "POV: Historian",
                description: `<p>The eluxemburgensia chatbot allows users to explore Luxembourg's digitised newspaper collections through natural language queries. Powered by ChatGPT, this AI-powered interface makes historical newspaper content accessible through conversational search in French, German, and English.</p>
                <p>Users can ask questions about historical topics, events, or themes covered in Luxembourgish newspapers, making decades of historical content discoverable through modern conversational interfaces. The system acknowledges its learning limitations, encouraging critical evaluation of responses while democratizing access to cultural heritage.</p>`,
                links: [
                    { text: "💬 Chat Interface", url: "https://chat.eluxemburgensia.lu/" },
                    { text: "📚 eluxemburgensia", url: "https://eluxemburgensia.lu/" }
                ]
            }
        };

        // STATUS MESSAGES
        function showStatus(message, isError = false) {
            const status = document.getElementById('statusMessage');
            status.textContent = message;
            status.className = isError ? 'status-message status-error' : 'status-message';
            status.style.display = 'block';
            setTimeout(() => status.style.display = 'none', 3000);
        }

        // TEST MODAL
        function testModal() {
            console.log('Testing modal...');
            showStatus('Opening test modal...', false);
            openQuestionsModal(1);
        }

        // TEST RED BUTTONS
        function testRedButtons() {
            const buttons = document.querySelectorAll('.assign-btn');
            console.log('Found', buttons.length, 'assign buttons');
            
            if (buttons.length === 0) {
                alert('❌ No red buttons found! You are using an OLD version. Please download the NEW version!');
            } else {
                alert(`✅ Found ${buttons.length} red "Assign Region" buttons! They should be pulsing red on each card.`);
            }
            
            showStatus(`Found ${buttons.length} assign buttons`, buttons.length === 0);
        }

        // TEST PLACE CARD DIRECTLY
        function testPlaceCard() {
            console.log('🧪 TESTING PLACE CARD DIRECTLY...');
            alert('Testing direct card placement - check console for details. You should see a yellow dot and red card.');
            
            // Force place card 1 in the "Working with AI" circle (SVG coordinates)
            console.log('🧪 Forcing placement of card 1 in Working with AI circle...');
            createPlacedCard(1, 290, 200); // Match the SVG circle position
            
            // Also mark the original card as placed
            const originalCard = document.querySelector('[data-card="1"]');
            if (originalCard) {
                originalCard.classList.add('placed');
                console.log('✅ Marked original card as placed');
            }
            
            showStatus('Test card placed in Working with AI circle - look for red bouncing card and yellow debug dot!', false);
        }

        // SETUP CARD EVENTS
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.card-item').forEach(card => {
                // Click on card title/content for details (not on button)
                card.addEventListener('click', function(e) {
                    // Don't open details if clicking the assign button
                    if (e.target.classList.contains('assign-btn')) {
                        return;
                    }
                    
                    if (clickTimer) return;
                    
                    clickTimer = setTimeout(() => {
                        const cardId = parseInt(this.dataset.card);
                        openDetailsModal(cardId);
                        clickTimer = null;
                    }, 100);
                });

                // Double click for questions (backup method)
                card.addEventListener('dblclick', function(e) {
                    e.preventDefault();
                    
                    // Don't double-click on button
                    if (e.target.classList.contains('assign-btn')) {
                        return;
                    }
                    
                    if (clickTimer) {
                        clearTimeout(clickTimer);
                        clickTimer = null;
                    }
                    
                    const cardId = parseInt(this.dataset.card);
                    
                    if (this.classList.contains('placed')) {
                        returnCardToPanel(cardId);
                    } else {
                        openQuestionsModal(cardId);
                    }
                });
            });

            // Close modals when clicking outside
            document.getElementById('questionsModal').addEventListener('click', function(e) {
                if (e.target === this) closeQuestionsModal();
            });
            
            document.getElementById('detailsModal').addEventListener('click', function(e) {
                if (e.target === this) closeDetailsModal();
            });

            // Create region dots when page loads
            setTimeout(createRegionDots, 100);
        });

        // Update region dots on window resize
        window.addEventListener('resize', function() {
            setTimeout(createRegionDots, 100);
        });

        function openQuestionsModal(cardId) {
            currentCardId = cardId;
            selectedAnswers = [];
            
            // Update title
            const title = document.getElementById('questionsTitle');
            title.textContent = `"${cardTitles[cardId]}" - Answer the Three Questions`;
            
            // Clear all checkboxes
            ['working', 'designing', 'developing'].forEach(category => {
                const checkbox = document.getElementById(`checkbox-${category}`);
                const box = checkbox.closest('.question-box');
                checkbox.classList.remove('checked');
                box.classList.remove('selected');
            });
            
            // Show modal
            const modal = document.getElementById('questionsModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            showStatus(`Opened questions for "${cardTitles[cardId]}"`, false);
        }

        function closeQuestionsModal() {
            document.getElementById('questionsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            currentCardId = null;
            selectedAnswers = [];
        }

        function toggleQuestion(category) {
            const checkbox = document.getElementById(`checkbox-${category}`);
            const box = checkbox.closest('.question-box');
            
            if (selectedAnswers.includes(category)) {
                selectedAnswers = selectedAnswers.filter(c => c !== category);
                checkbox.classList.remove('checked');
                box.classList.remove('selected');
            } else {
                selectedAnswers.push(category);
                checkbox.classList.add('checked');
                box.classList.add('selected');
            }
        }

        function placeCard() {
            if (!currentCardId) {
                showStatus('No card selected!', true);
                return;
            }
            
            if (selectedAnswers.length === 0) {
                showStatus('Please answer at least one question!', true);
                return;
            }
            
            // FIXED: Proper sorting
            const sorted = selectedAnswers.sort((a, b) => {
                const order = ['working', 'designing', 'developing'];
                return order.indexOf(a) - order.indexOf(b);
            }).join(',');
            
            console.log('Selected answers:', selectedAnswers);
            console.log('Sorted key:', sorted);
            
            const position = regionPositions[sorted];
            if (!position) {
                showStatus(`Invalid combination: ${sorted}`, true);
                console.log('Available positions:', Object.keys(regionPositions));
                return;
            }
            
            // Mark card as placed
            const card = document.querySelector(`[data-card="${currentCardId}"]`);
            card.classList.add('placed');
            
            // Create placed card
            createPlacedCard(currentCardId, position.x, position.y);
            
            // Success message
            const regions = selectedAnswers.map(a => {
                const names = {working: 'Working', designing: 'Designing', developing: 'Developing'};
                return names[a];
            }).join(' + ');
            
            showStatus(`"${cardTitles[currentCardId]}" placed in: ${regions} with AI`, false);
            
            closeQuestionsModal();
        }

        function createPlacedCard(cardId, svgX, svgY) {
            // Just store the card placement - the visual will be handled by region dots
            placedCards.set(cardId, {x: svgX, y: svgY});
            
            // Update region dots to show all cards in each region
            updateRegionDots();
        }

        // Create and manage region dots
        function createRegionDots() {
            const container = document.getElementById('venn-container');
            if (!container) return;

            // Remove existing region dots
            container.querySelectorAll('.region-dot').forEach(dot => dot.remove());

            const svg = container.querySelector('.venn-svg');
            if (!svg) return;

            const svgRect = svg.getBoundingClientRect();
            const scaleX = svgRect.width / 900;
            const scaleY = svgRect.height / 650;

            // Create a dot for each region
            Object.entries(regionPositions).forEach(([region, pos]) => {
                const dot = document.createElement('div');
                dot.className = 'region-dot empty';
                dot.dataset.region = region;
                
                // Convert SVG to pixel coordinates
                const pixelX = pos.x * scaleX - 17; // Center the dot
                const pixelY = pos.y * scaleY - 17;

                dot.style.left = pixelX + 'px';
                dot.style.top = pixelY + 'px';

                // Click handler to show cards in this region
                dot.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showRegionCards(region);
                });

                container.appendChild(dot);
            });

            // Initial update
            updateRegionDots();
        }

        // Update region dots to show which cards are in each region
        function updateRegionDots() {
            const dots = document.querySelectorAll('.region-dot');
            
            dots.forEach(dot => {
                const region = dot.dataset.region;
                const cardsInRegion = getCardsInRegion(region);
                
                // Remove existing size classes
                dot.classList.remove('size-1', 'size-2', 'size-3', 'size-4', 'size-5');
                
                if (cardsInRegion.length === 0) {
                    dot.classList.add('empty');
                    dot.innerHTML = '';
                    dot.title = '';
                } else {
                    dot.classList.remove('empty');
                    
                    // Add size class based on number of cards
                    const sizeClass = `size-${Math.min(cardsInRegion.length, 5)}`;
                    dot.classList.add(sizeClass);
                    
                    // Format card numbers with semicolons and zero padding
                    const formattedNumbers = cardsInRegion
                        .map(id => id.toString().padStart(2, '0'))
                        .join('; ');
                    
                    dot.textContent = formattedNumbers;
                    
                    const regionName = getRegionName(region);
                    const cardNames = cardsInRegion.map(id => `${id}. ${cardTitles[id]}`).join('\n');
                    dot.title = `${regionName}\n\nCards: ${formattedNumbers}\n\nCards:\n${cardNames}\n\nClick to manage cards in this region`;
                }
            });
        }

        // Get all cards in a specific region
        function getCardsInRegion(region) {
            const regionPos = regionPositions[region];
            const cardsInRegion = [];
            
            placedCards.forEach((cardData, cardId) => {
                if (Math.abs(cardData.x - regionPos.x) < 10 && Math.abs(cardData.y - regionPos.y) < 10) {
                    cardsInRegion.push(cardId);
                }
            });
            
            return cardsInRegion.sort((a, b) => a - b);
        }

        // Get human-readable region name
        function getRegionName(region) {
            const names = {
                'working': 'Working with AI',
                'designing': 'Designing with AI', 
                'developing': 'Developing for AI',
                'working,designing': 'Working + Designing with AI',
                'working,developing': 'Working + Developing for AI',
                'designing,developing': 'Designing + Developing for AI',
                'working,designing,developing': 'All Three: Working + Designing + Developing for AI'
            };
            return names[region] || region;
        }

        // Show cards in a region and allow management
        function showRegionCards(region) {
            const cardsInRegion = getCardsInRegion(region);
            
            if (cardsInRegion.length === 0) {
                showStatus('No cards in this region', true);
                return;
            }
            
            const regionName = getRegionName(region);
            const cardList = cardsInRegion.map(id => `${id}. ${cardTitles[id]}`).join('\n');
            
            const action = prompt(`${regionName}\n\nCards in this region:\n${cardList}\n\nOptions:\n- Enter card number to reposition it\n- Type 'remove' + card number (e.g., 'remove 3') to remove a card\n- Press Cancel to close`);
            
            if (action) {
                if (action.toLowerCase().startsWith('remove ')) {
                    const cardId = parseInt(action.replace('remove ', ''));
                    if (cardId && cardsInRegion.includes(cardId)) {
                        returnCardToPanel(cardId);
                    } else {
                        showStatus('Invalid card number', true);
                    }
                } else {
                    const cardId = parseInt(action);
                    if (cardId && cardsInRegion.includes(cardId)) {
                        openQuestionsModal(cardId);
                    } else {
                        showStatus('Invalid card number', true);
                    }
                }
            }
        }

        function returnCardToPanel(cardId) {
            const originalCard = document.querySelector(`[data-card="${cardId}"]`);
            if (originalCard) originalCard.classList.remove('placed');
            
            placedCards.delete(cardId);
            showStatus(`"${cardTitles[cardId]}" returned to panel`, false);
            
            // Update region dots
            updateRegionDots();
        }

        // DETAILS MODAL
        function openDetailsModal(cardId) {
            const data = cardDetails[cardId];
            if (!data) return;

            document.getElementById('detailsTitle').textContent = data.title;
            document.getElementById('detailsPOV').textContent = data.pov;
            document.getElementById('detailsDescription').innerHTML = data.description;
            
            const links = document.getElementById('detailsLinks');
            links.innerHTML = '';
            data.links.forEach(link => {
                const a = document.createElement('a');
                a.href = link.url;
                a.target = '_blank';
                a.className = 'details-modal-link';
                a.textContent = link.text;
                links.appendChild(a);
            });

            document.getElementById('detailsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeDetailsModal() {
            document.getElementById('detailsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // SHOW DEBUG MARKERS for all regions
        function showDebugMarkers() {
            console.log('🎯 SHOWING DEBUG MARKERS...');
            const container = document.getElementById('venn-container');
            
            // Remove existing debug markers
            container.querySelectorAll('.debug-marker').forEach(marker => marker.remove());
            
            Object.entries(regionPositions).forEach(([region, pos]) => {
                const marker = document.createElement('div');
                marker.className = 'debug-marker';
                marker.style.position = 'absolute';
                marker.style.width = '20px';
                marker.style.height = '20px';
                marker.style.borderRadius = '50%';
                marker.style.border = '3px solid purple';
                marker.style.background = 'yellow';
                marker.style.zIndex = '9999';
                marker.style.fontSize = '10px';
                marker.style.display = 'flex';
                marker.style.alignItems = 'center';
                marker.style.justifyContent = 'center';
                marker.style.fontWeight = 'bold';
                marker.title = region;
                
                // Convert SVG to pixel coordinates
                const svg = container.querySelector('.venn-svg');
                const svgRect = svg.getBoundingClientRect();
                const scaleX = svgRect.width / 900;
                const scaleY = svgRect.height / 650;
                const pixelX = pos.x * scaleX - 10;
                const pixelY = pos.y * scaleY - 10;
                
                marker.style.left = pixelX + 'px';
                marker.style.top = pixelY + 'px';
                marker.textContent = Object.keys(regionPositions).indexOf(region) + 1;
                
                container.appendChild(marker);
                console.log(`📍 Added marker for ${region} at SVG(${pos.x},${pos.y}) -> Pixel(${pixelX},${pixelY})`);
            });
            
            showStatus('Debug markers shown - purple circles with yellow centers mark each region!', false);
        }

        // UTILITY FUNCTIONS
        function resetCards() {
            document.querySelectorAll('.region-dot').forEach(dot => dot.remove());
            document.querySelectorAll('.card-item').forEach(card => card.classList.remove('placed'));
            placedCards.clear();
            closeQuestionsModal();
            closeDetailsModal();
            showStatus('All cards reset!', false);
            
            // Recreate empty region dots
            setTimeout(createRegionDots, 100);
        }

        function showSolution() {
            document.getElementById('solution-legend').style.display = 'block';
            document.getElementById('solution-circles').style.display = 'block';
            showStatus('Showing proposed solution', false);
        }

        function hideSolution() {
            document.getElementById('solution-legend').style.display = 'none';
            document.getElementById('solution-circles').style.display = 'none';
            showStatus('Hidden solution', false);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeQuestionsModal();
                closeDetailsModal();
            }
        });
    </script>
</body>
</html>